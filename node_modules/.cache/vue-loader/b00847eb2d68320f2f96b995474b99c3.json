{"remainingRequest":"/home/shahrad/Documents/shahradj.github.io/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/shahrad/Documents/shahradj.github.io/src/components/Controls.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/shahrad/Documents/shahradj.github.io/src/components/Controls.vue","mtime":1692676096737},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1692676095757},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/babel-loader/lib/index.js","mtime":1692676095685},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/vuetify-loader/lib/loader.js","mtime":1692676096537},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1692676095757},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/vue-loader/lib/index.js","mtime":1692676096509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDbG9jayBmcm9tICcuL0Nsb2NrJzsKaW1wb3J0IFRleHRGaWVsZCBmcm9tICcuL1RleHRGaWVsZCc7CmltcG9ydCB7CiAgbWRpTWV0cm9ub21lLAogIG1kaVN0b3AsCiAgbWRpV3JlbmNoLAogIG1kaUluZm9ybWF0aW9uLAogIG1kaU11c2ljTm90ZSwKICBtZGlDbG9ja091dGxpbmUKfSBmcm9tICdAbWRpL2pzJzsKCmltcG9ydCB7IGdldENsaWNrSW50ZXJ2YWwgfSBmcm9tICcuLi9jbGljayc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2xvY2ssCiAgICBUZXh0RmllbGQKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZGlTdG9wLAogICAgICBtZGlNZXRyb25vbWUsCiAgICAgIG1kaVdyZW5jaCwKICAgICAgbWRpSW5mb3JtYXRpb24sCiAgICAgIG1kaU11c2ljTm90ZSwKICAgICAgbWRpQ2xvY2tPdXRsaW5lCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBsYXlQYXVzZUljb24oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGxheWluZzogJ21kaS1wYXVzZScsCiAgICAgICAgcGF1c2VkOiAnbWRpLXBsYXknLAogICAgICAgIHN0b3BwZWQ6ICdtZGktcGxheScKICAgICAgfVt0aGlzLiRzdG9yZS5zdGF0ZS5wbGF5U3RhdGVdOwogICAgfSwKICAgIGNsaWNrQnBtOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuY2xpY2tCcG07CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRDbGlja0JwbScsIHZhbHVlKTsKICAgICAgfQogICAgfSwKICAgIGNsaWNrVGltZVNpZ25hdHVyZTogewogICAgICBnZXQoKSB7CiAgICAgICAgY29uc3QgeyBiZWF0cywgdW5pdCB9ID0gdGhpcy4kc3RvcmUuc3RhdGUuY2xpY2tUaW1lU2lnbmF0dXJlOwogICAgICAgIHJldHVybiBgJHtiZWF0c30vJHt1bml0fWA7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIGNvbnN0IFtiZWF0cywgdW5pdF0gPSB2YWx1ZS5zcGxpdCgnLycpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRDbGlja1RpbWVTaWduYXR1cmUnLCB7CiAgICAgICAgICBiZWF0czogTnVtYmVyKGJlYXRzKSB8fCAnJywKICAgICAgICAgIHVuaXQ6IE51bWJlcih1bml0KSB8fCAnJwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdGltZVZhbHVlcygpIHsKICAgICAgY29uc3QgcGxheVBvc2l0aW9uID0gdGhpcy4kc3RvcmUuc3RhdGUucGxheVBvc2l0aW9uOwogICAgICByZXR1cm4gWwogICAgICAgIE1hdGguZmxvb3IocGxheVBvc2l0aW9uIC8gNjApLAogICAgICAgIE1hdGguZmxvb3IocGxheVBvc2l0aW9uICUgNjApLAogICAgICAgIE1hdGguZmxvb3IoKHBsYXlQb3NpdGlvbiAlIDEpICogMTApCiAgICAgIF07CiAgICB9LAogICAgYmVhdHNWYWx1ZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLnBsYXlCZWF0c1Bvc2l0aW9uOwogICAgfSwKICAgIGNvbnRyb2xFZGl0TW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmNvbnRyb2xFZGl0TW9kZTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG1hcENvbnRyb2xPckRpc3BhdGNoQWN0aW9uKGNvbnRyb2xOYW1lLCBhY3Rpb25OYW1lKSB7CiAgICAgIGlmICghdGhpcy5jb250cm9sRWRpdE1vZGUpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZGlzcGF0Y2goYWN0aW9uTmFtZSB8fCBjb250cm9sTmFtZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRDb250cm9sRWRpdFNlbGVjdGVkJywgY29udHJvbE5hbWUpOwogICAgfSwKICAgIGdldENvbnRyb2xNYXBwaW5nTmFtZShjb250cm9sTmFtZSkgewogICAgICBpZiAoIXRoaXMuY29udHJvbEVkaXRNb2RlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGNvbnN0IGNvbnRyb2xNYXBwaW5nID0gdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRDb250cm9sTWFwcGluZyhjb250cm9sTmFtZSk7CiAgICAgIGlmIChjb250cm9sTWFwcGluZykgewogICAgICAgIGNvbnN0IG5hbWUgPQogICAgICAgICAgewogICAgICAgICAgICAnICc6ICdTcGFjZScKICAgICAgICAgIH1bY29udHJvbE1hcHBpbmcudmFsdWVdIHx8IGNvbnRyb2xNYXBwaW5nLnZhbHVlOwogICAgICAgIGNvbnN0IHR5cGUgPSB7CiAgICAgICAgICBrZXk6ICdLZXlib2FyZCcsCiAgICAgICAgICBub3RlOiAnTm90ZScsCiAgICAgICAgICBjb250cm9sQ2hhbmdlOiAnQ29udHJvbCBjaGFuZ2UnCiAgICAgICAgfVtjb250cm9sTWFwcGluZy50eXBlXTsKICAgICAgICByZXR1cm4gYCR7dHlwZX06ICR7bmFtZX1gOwogICAgICB9CiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBnZXRDb250cm9sTWFwcGluZ0NvbG9yKGNvbnRyb2xOYW1lKSB7CiAgICAgIGlmICghdGhpcy5jb250cm9sRWRpdE1vZGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgY29udHJvbE1hcHBpbmcgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENvbnRyb2xNYXBwaW5nKGNvbnRyb2xOYW1lKTsKICAgICAgaWYgKGNvbnRyb2xNYXBwaW5nKSB7CiAgICAgICAgcmV0dXJuICd5ZWxsb3cnOwogICAgICB9CiAgICB9LAogICAgc2V0VGltZSh7IHZhbHVlcywgaW5kZXggfSkgewogICAgICBsZXQgW21pbnV0ZXMsIHNlY29uZHMsIHRlbnRoc10gPSB2YWx1ZXM7CiAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgIHNlY29uZHMgPSAwOwogICAgICAgIHRlbnRocyA9IDA7CiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IDEpIHsKICAgICAgICB0ZW50aHMgPSAwOwogICAgICB9CiAgICAgIGNvbnN0IHBsYXlQb3NpdGlvbiA9IG1pbnV0ZXMgKiA2MCArIHNlY29uZHMgKyB0ZW50aHMgLyAxMDsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3BsYXlBdCcsIHBsYXlQb3NpdGlvbik7CiAgICB9LAogICAgc2V0QmVhdHMoeyB2YWx1ZXMsIGluZGV4IH0pIHsKICAgICAgbGV0IFtiYXJzLCBiZWF0c10gPSB2YWx1ZXM7CiAgICAgIGlmIChpbmRleCA9PT0gMCkgewogICAgICAgIGJlYXRzID0gMTsKICAgICAgfQogICAgICBjb25zdCBjbGlja0ludGVydmFsID0gZ2V0Q2xpY2tJbnRlcnZhbCh0aGlzLiRzdG9yZS5zdGF0ZSk7CiAgICAgIGNvbnN0IHBsYXlQb3NpdGlvbiA9CiAgICAgICAgYmFycyAqIGNsaWNrSW50ZXJ2YWwgKiA0ICsgKGJlYXRzIC0gMSkgKiBjbGlja0ludGVydmFsOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncGxheUF0JywgcGxheVBvc2l0aW9uKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Controls.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Controls.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <VRow justify=\"end\" align=\"center\">\n    <VBtn\n      v-if=\"controlEditMode\"\n      small\n      @click=\"$store.dispatch('toggleControlEditMode')\"\n      >Done mapping</VBtn\n    >\n    <VBtn\n      icon\n      @click=\"mapControlOrDispatchAction('playPause')\"\n      :title=\"getControlMappingName('playPause')\"\n      :color=\"getControlMappingColor('playPause')\"\n    >\n      <VIcon>{{ playPauseIcon }}</VIcon>\n    </VBtn>\n    <VBtn\n      icon\n      @click=\"mapControlOrDispatchAction('stop')\"\n      :title=\"getControlMappingName('stop')\"\n      :color=\"getControlMappingColor('stop')\"\n    >\n      <VIcon>{{ mdiStop }}</VIcon>\n    </VBtn>\n\n    <VBtn\n      icon\n      :outlined=\"$store.state.clickActive\"\n      @click=\"mapControlOrDispatchAction('clickActive', 'toggleClickActive')\"\n      :title=\"getControlMappingName('clickActive')\"\n      :color=\"getControlMappingColor('clickActive')\"\n    >\n      <VIcon>{{ mdiMetronome }}</VIcon>\n    </VBtn>\n\n    <TextField v-model=\"clickBpm\" class=\"small-input\" />\n    <TextField v-model=\"clickTimeSignature\" class=\"small-input\" />\n\n    <Clock\n      :values=\"timeValues\"\n      @input=\"setTime\"\n      :icon=\"mdiClockOutline\"\n      class=\"mr-4\"\n    />\n\n    <Clock :values=\"beatsValues\" :icon=\"mdiMusicNote\" @input=\"setBeats\" />\n\n    <VBtn text icon @click=\"$store.dispatch('toggleSettingsDialog')\">\n      <VIcon>{{ mdiWrench }}</VIcon>\n    </VBtn>\n    <VBtn text icon @click=\"$store.dispatch('toggleAboutDialog')\">\n      <VIcon>{{ mdiInformation }}</VIcon>\n    </VBtn>\n  </VRow>\n</template>\n\n<script>\nimport Clock from './Clock';\nimport TextField from './TextField';\nimport {\n  mdiMetronome,\n  mdiStop,\n  mdiWrench,\n  mdiInformation,\n  mdiMusicNote,\n  mdiClockOutline\n} from '@mdi/js';\n\nimport { getClickInterval } from '../click';\n\nexport default {\n  components: {\n    Clock,\n    TextField\n  },\n  data() {\n    return {\n      mdiStop,\n      mdiMetronome,\n      mdiWrench,\n      mdiInformation,\n      mdiMusicNote,\n      mdiClockOutline\n    };\n  },\n  computed: {\n    playPauseIcon() {\n      return {\n        playing: 'mdi-pause',\n        paused: 'mdi-play',\n        stopped: 'mdi-play'\n      }[this.$store.state.playState];\n    },\n    clickBpm: {\n      get() {\n        return this.$store.state.clickBpm;\n      },\n      set(value) {\n        this.$store.dispatch('setClickBpm', value);\n      }\n    },\n    clickTimeSignature: {\n      get() {\n        const { beats, unit } = this.$store.state.clickTimeSignature;\n        return `${beats}/${unit}`;\n      },\n      set(value) {\n        const [beats, unit] = value.split('/');\n        this.$store.dispatch('setClickTimeSignature', {\n          beats: Number(beats) || '',\n          unit: Number(unit) || ''\n        });\n      }\n    },\n    timeValues() {\n      const playPosition = this.$store.state.playPosition;\n      return [\n        Math.floor(playPosition / 60),\n        Math.floor(playPosition % 60),\n        Math.floor((playPosition % 1) * 10)\n      ];\n    },\n    beatsValues() {\n      return this.$store.getters.playBeatsPosition;\n    },\n    controlEditMode() {\n      return this.$store.state.controlEditMode;\n    }\n  },\n  methods: {\n    mapControlOrDispatchAction(controlName, actionName) {\n      if (!this.controlEditMode) {\n        return this.$store.dispatch(actionName || controlName);\n      }\n\n      this.$store.dispatch('setControlEditSelected', controlName);\n    },\n    getControlMappingName(controlName) {\n      if (!this.controlEditMode) {\n        return;\n      }\n      const controlMapping = this.$store.getters.getControlMapping(controlName);\n      if (controlMapping) {\n        const name =\n          {\n            ' ': 'Space'\n          }[controlMapping.value] || controlMapping.value;\n        const type = {\n          key: 'Keyboard',\n          note: 'Note',\n          controlChange: 'Control change'\n        }[controlMapping.type];\n        return `${type}: ${name}`;\n      }\n      return '';\n    },\n    getControlMappingColor(controlName) {\n      if (!this.controlEditMode) {\n        return;\n      }\n      const controlMapping = this.$store.getters.getControlMapping(controlName);\n      if (controlMapping) {\n        return 'yellow';\n      }\n    },\n    setTime({ values, index }) {\n      let [minutes, seconds, tenths] = values;\n      if (index === 0) {\n        seconds = 0;\n        tenths = 0;\n      } else if (index === 1) {\n        tenths = 0;\n      }\n      const playPosition = minutes * 60 + seconds + tenths / 10;\n      this.$store.dispatch('playAt', playPosition);\n    },\n    setBeats({ values, index }) {\n      let [bars, beats] = values;\n      if (index === 0) {\n        beats = 1;\n      }\n      const clickInterval = getClickInterval(this.$store.state);\n      const playPosition =\n        bars * clickInterval * 4 + (beats - 1) * clickInterval;\n      this.$store.dispatch('playAt', playPosition);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.small-input {\n  max-width: 4rem;\n}\n</style>\n"]}]}