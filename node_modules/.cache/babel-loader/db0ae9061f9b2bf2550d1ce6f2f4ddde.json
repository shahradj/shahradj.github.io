{"remainingRequest":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js!/home/shahrad/Documents/multiplayer/src/midi.js","dependencies":[{"path":"/home/shahrad/Documents/multiplayer/src/midi.js","mtime":1684244427390},{"path":"/home/shahrad/Documents/multiplayer/node_modules/cache-loader/dist/cjs.js","mtime":1684244501439},{"path":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js","mtime":1684244499435}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCB3ZWJNaWRpIGZyb20gJ3dlYm1pZGknOwpleHBvcnQgZnVuY3Rpb24gaW5pdE1pZGkoKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHdlYk1pZGkuZW5hYmxlKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgaWYgKGVycikgewogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9IGVsc2UgewogICAgICAgIHJlc29sdmUoKTsKICAgICAgfQogICAgfSk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlucHV0cygpIHsKICByZXR1cm4gd2ViTWlkaS5pbnB1dHM7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldElucHV0KG5hbWUpIHsKICByZXR1cm4gd2ViTWlkaS5nZXRJbnB1dEJ5TmFtZShuYW1lKTsKfQpleHBvcnQgZnVuY3Rpb24gaW5pdE1pZGlFdmVudHMoZGV2aWNlTmFtZSwgc3RvcmUpIHsKICB2YXIgaW5wdXQgPSBnZXRJbnB1dChkZXZpY2VOYW1lKTsKICBpbnB1dC5yZW1vdmVMaXN0ZW5lcigpOwogIGlucHV0LmFkZExpc3RlbmVyKCdub3Rlb24nLCAnYWxsJywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBzdG9yZS5kaXNwYXRjaChzdG9yZS5yb290U3RhdGUuY29udHJvbEVkaXRNb2RlID8gJ3NldENvbnRyb2xFZGl0JyA6ICd0cmlnZ2VyQ29udHJvbEFjdGlvbicsIHsKICAgICAgdHlwZTogJ25vdGUnLAogICAgICB2YWx1ZTogZXZlbnQubm90ZS5udW1iZXIKICAgIH0pOwogIH0pOwogIGlucHV0LmFkZExpc3RlbmVyKCdjb250cm9sY2hhbmdlJywgJ2FsbCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgaWYgKGV2ZW50LnZhbHVlICE9PSAxMjcpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHN0b3JlLmRpc3BhdGNoKHN0b3JlLnJvb3RTdGF0ZS5jb250cm9sRWRpdE1vZGUgPyAnc2V0Q29udHJvbEVkaXQnIDogJ3RyaWdnZXJDb250cm9sQWN0aW9uJywgewogICAgICB0eXBlOiAnY29udHJvbENoYW5nZScsCiAgICAgIHZhbHVlOiBldmVudC5jb250cm9sbGVyLm51bWJlcgogICAgfSk7CiAgfSk7Cn0="},{"version":3,"sources":["/home/shahrad/Documents/multiplayer/src/midi.js"],"names":["webMidi","initMidi","Promise","resolve","reject","enable","err","inputs","getInput","name","getInputByName","initMidiEvents","deviceName","store","input","removeListener","addListener","event","dispatch","rootState","controlEditMode","type","value","note","number","controller"],"mappings":";AAAA,OAAOA,OAAP,MAAoB,SAApB;AAEA,OAAO,SAASC,QAAT,GAAoB;AACzB,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCJ,IAAAA,OAAO,CAACK,MAAR,CAAe,UAAAC,GAAG,EAAI;AACpB,UAAIA,GAAJ,EAAS;AACPF,QAAAA,MAAM,CAACE,GAAD,CAAN;AACD,OAFD,MAEO;AACLH,QAAAA,OAAO;AACR;AACF,KAND;AAOD,GARM,CAAP;AASD;AAED,OAAO,SAASI,MAAT,GAAkB;AACvB,SAAOP,OAAO,CAACO,MAAf;AACD;AAED,OAAO,SAASC,QAAT,CAAkBC,IAAlB,EAAwB;AAC7B,SAAOT,OAAO,CAACU,cAAR,CAAuBD,IAAvB,CAAP;AACD;AAED,OAAO,SAASE,cAAT,CAAwBC,UAAxB,EAAoCC,KAApC,EAA2C;AAChD,MAAMC,KAAK,GAAGN,QAAQ,CAACI,UAAD,CAAtB;AAEAE,EAAAA,KAAK,CAACC,cAAN;AACAD,EAAAA,KAAK,CAACE,WAAN,CAAkB,QAAlB,EAA4B,KAA5B,EAAmC,UAAAC,KAAK,EAAI;AAC1CJ,IAAAA,KAAK,CAACK,QAAN,CACEL,KAAK,CAACM,SAAN,CAAgBC,eAAhB,GACI,gBADJ,GAEI,sBAHN,EAIE;AAAEC,MAAAA,IAAI,EAAE,MAAR;AAAgBC,MAAAA,KAAK,EAAEL,KAAK,CAACM,IAAN,CAAWC;AAAlC,KAJF;AAMD,GAPD;AAQAV,EAAAA,KAAK,CAACE,WAAN,CAAkB,eAAlB,EAAmC,KAAnC,EAA0C,UAAAC,KAAK,EAAI;AACjD,QAAIA,KAAK,CAACK,KAAN,KAAgB,GAApB,EAAyB;AACvB;AACD;;AACDT,IAAAA,KAAK,CAACK,QAAN,CACEL,KAAK,CAACM,SAAN,CAAgBC,eAAhB,GACI,gBADJ,GAEI,sBAHN,EAIE;AAAEC,MAAAA,IAAI,EAAE,eAAR;AAAyBC,MAAAA,KAAK,EAAEL,KAAK,CAACQ,UAAN,CAAiBD;AAAjD,KAJF;AAMD,GAVD;AAWD","sourcesContent":["import webMidi from 'webmidi';\n\nexport function initMidi() {\n  return new Promise((resolve, reject) => {\n    webMidi.enable(err => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve();\n      }\n    });\n  });\n}\n\nexport function inputs() {\n  return webMidi.inputs;\n}\n\nexport function getInput(name) {\n  return webMidi.getInputByName(name);\n}\n\nexport function initMidiEvents(deviceName, store) {\n  const input = getInput(deviceName);\n\n  input.removeListener();\n  input.addListener('noteon', 'all', event => {\n    store.dispatch(\n      store.rootState.controlEditMode\n        ? 'setControlEdit'\n        : 'triggerControlAction',\n      { type: 'note', value: event.note.number }\n    );\n  });\n  input.addListener('controlchange', 'all', event => {\n    if (event.value !== 127) {\n      return;\n    }\n    store.dispatch(\n      store.rootState.controlEditMode\n        ? 'setControlEdit'\n        : 'triggerControlAction',\n      { type: 'controlChange', value: event.controller.number }\n    );\n  });\n}\n"]}]}