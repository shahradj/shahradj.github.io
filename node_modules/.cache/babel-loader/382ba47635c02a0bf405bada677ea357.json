{"remainingRequest":"/home/shahrad/Documents/shahradj.github.io/node_modules/babel-loader/lib/index.js!/home/shahrad/Documents/shahradj.github.io/src/database.js","dependencies":[{"path":"/home/shahrad/Documents/shahradj.github.io/src/database.js","mtime":1692676096737},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1692676095757},{"path":"/home/shahrad/Documents/shahradj.github.io/node_modules/babel-loader/lib/index.js","mtime":1692676095685}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvc2hhaHJhZC9Eb2N1bWVudHMvc2hhaHJhZGouZ2l0aHViLmlvL25vZGVfbW9kdWxlcy9AdnVlL2JhYmVsLXByZXNldC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgeyBvcGVuREIgfSBmcm9tICdpZGInOwp2YXIgZGVmYXVsdENvbGxlY3Rpb24gPSAnZGVmYXVsdCc7CnZhciBkYkNvbm5lY3Rpb24gPSBvcGVuREIoJ211bHRpdHJhY2stcGxheWVyJywgMSwgewogIHVwZ3JhZGU6IGZ1bmN0aW9uIHVwZ3JhZGUoZGIpIHsKICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKGRlZmF1bHRDb2xsZWN0aW9uKTsKICB9Cn0pOwpleHBvcnQgZnVuY3Rpb24gc2V0KF94LCBfeDIpIHsKICByZXR1cm4gX3NldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfc2V0KCkgewogIF9zZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoa2V5LCB2YWx1ZSkgewogICAgdmFyIGNvbGxlY3Rpb24sCiAgICAgICAgX2FyZ3MgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBfYXJncy5sZW5ndGggPiAyICYmIF9hcmdzWzJdICE9PSB1bmRlZmluZWQgPyBfYXJnc1syXSA6IGRlZmF1bHRDb2xsZWN0aW9uOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGRiQ29ubmVjdGlvbjsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnNlbnQucHV0KGNvbGxlY3Rpb24sIHZhbHVlLCBrZXkpKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiBnZXQoX3gzKSB7CiAgcmV0dXJuIF9nZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZnVuY3Rpb24gX2dldCgpIHsKICBfZ2V0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihrZXkpIHsKICAgIHZhciBjb2xsZWN0aW9uLAogICAgICAgIF9hcmdzMiA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbGxlY3Rpb24gPSBfYXJnczIubGVuZ3RoID4gMSAmJiBfYXJnczJbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmdzMlsxXSA6IGRlZmF1bHRDb2xsZWN0aW9uOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBkYkNvbm5lY3Rpb247CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnNlbnQuZ2V0KGNvbGxlY3Rpb24sIGtleSkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKICByZXR1cm4gX2dldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9"},{"version":3,"sources":["/home/shahrad/Documents/shahradj.github.io/src/database.js"],"names":["openDB","defaultCollection","dbConnection","upgrade","db","createObjectStore","set","key","value","collection","put","get"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,KAAvB;AAEA,IAAMC,iBAAiB,GAAG,SAA1B;AACA,IAAMC,YAAY,GAAGF,MAAM,CAAC,mBAAD,EAAsB,CAAtB,EAAyB;AAClDG,EAAAA,OADkD,mBAC1CC,EAD0C,EACtC;AACVA,IAAAA,EAAE,CAACC,iBAAH,CAAqBJ,iBAArB;AACD;AAHiD,CAAzB,CAA3B;AAMA,gBAAsBK,GAAtB;AAAA;AAAA;;;iEAAO,iBAAmBC,GAAnB,EAAwBC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+BC,YAAAA,UAA/B,2DAA4CR,iBAA5C;AAAA;AAAA,mBACSC,YADT;;AAAA;AAAA,2DACuBQ,GADvB,CAC2BD,UAD3B,EACuCD,KADvC,EAC8CD,GAD9C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAIP,gBAAsBI,GAAtB;AAAA;AAAA;;;iEAAO,kBAAmBJ,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwBE,YAAAA,UAAxB,8DAAqCR,iBAArC;AAAA;AAAA,mBACSC,YADT;;AAAA;AAAA,6DACuBS,GADvB,CAC2BF,UAD3B,EACuCF,GADvC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { openDB } from 'idb';\n\nconst defaultCollection = 'default';\nconst dbConnection = openDB('multitrack-player', 1, {\n  upgrade(db) {\n    db.createObjectStore(defaultCollection);\n  }\n});\n\nexport async function set(key, value, collection = defaultCollection) {\n  return (await dbConnection).put(collection, value, key);\n}\n\nexport async function get(key, collection = defaultCollection) {\n  return (await dbConnection).get(collection, key);\n}\n"]}]}