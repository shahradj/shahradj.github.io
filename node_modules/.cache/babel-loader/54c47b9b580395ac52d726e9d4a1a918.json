{"remainingRequest":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js!/home/shahrad/Documents/multiplayer/src/database.js","dependencies":[{"path":"/home/shahrad/Documents/multiplayer/src/database.js","mtime":1684244427390},{"path":"/home/shahrad/Documents/multiplayer/node_modules/cache-loader/dist/cjs.js","mtime":1684244501439},{"path":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js","mtime":1684244499435}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvc2hhaHJhZC9Eb2N1bWVudHMvbXVsdGlwbGF5ZXIvbm9kZV9tb2R1bGVzL0B2dWUvYmFiZWwtcHJlc2V0LWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IG9wZW5EQiB9IGZyb20gJ2lkYic7CnZhciBkZWZhdWx0Q29sbGVjdGlvbiA9ICdkZWZhdWx0JzsKdmFyIGRiQ29ubmVjdGlvbiA9IG9wZW5EQignbXVsdGl0cmFjay1wbGF5ZXInLCAxLCB7CiAgdXBncmFkZTogZnVuY3Rpb24gdXBncmFkZShkYikgewogICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoZGVmYXVsdENvbGxlY3Rpb24pOwogIH0KfSk7CmV4cG9ydCBmdW5jdGlvbiBzZXQoX3gsIF94MikgewogIHJldHVybiBfc2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9zZXQoKSB7CiAgX3NldCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShrZXksIHZhbHVlKSB7CiAgICB2YXIgY29sbGVjdGlvbiwKICAgICAgICBfYXJncyA9IGFyZ3VtZW50czsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY29sbGVjdGlvbiA9IF9hcmdzLmxlbmd0aCA+IDIgJiYgX2FyZ3NbMl0gIT09IHVuZGVmaW5lZCA/IF9hcmdzWzJdIDogZGVmYXVsdENvbGxlY3Rpb247CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gZGJDb25uZWN0aW9uOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudC5wdXQoY29sbGVjdGlvbiwgdmFsdWUsIGtleSkpOwoKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CiAgcmV0dXJuIF9zZXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQoKZXhwb3J0IGZ1bmN0aW9uIGdldChfeDMpIHsKICByZXR1cm4gX2dldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpmdW5jdGlvbiBfZ2V0KCkgewogIF9nZXQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGtleSkgewogICAgdmFyIGNvbGxlY3Rpb24sCiAgICAgICAgX2FyZ3MyID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgY29sbGVjdGlvbiA9IF9hcmdzMi5sZW5ndGggPiAxICYmIF9hcmdzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3MyWzFdIDogZGVmYXVsdENvbGxlY3Rpb247CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIGRiQ29ubmVjdGlvbjsKCiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudC5nZXQoY29sbGVjdGlvbiwga2V5KSk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwogIHJldHVybiBfZ2V0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["/home/shahrad/Documents/multiplayer/src/database.js"],"names":["openDB","defaultCollection","dbConnection","upgrade","db","createObjectStore","set","key","value","collection","put","get"],"mappings":";;AAAA,SAASA,MAAT,QAAuB,KAAvB;AAEA,IAAMC,iBAAiB,GAAG,SAA1B;AACA,IAAMC,YAAY,GAAGF,MAAM,CAAC,mBAAD,EAAsB,CAAtB,EAAyB;AAClDG,EAAAA,OADkD,mBAC1CC,EAD0C,EACtC;AACVA,IAAAA,EAAE,CAACC,iBAAH,CAAqBJ,iBAArB;AACD;AAHiD,CAAzB,CAA3B;AAMA,gBAAsBK,GAAtB;AAAA;AAAA;;;iEAAO,iBAAmBC,GAAnB,EAAwBC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+BC,YAAAA,UAA/B,2DAA4CR,iBAA5C;AAAA;AAAA,mBACSC,YADT;;AAAA;AAAA,2DACuBQ,GADvB,CAC2BD,UAD3B,EACuCD,KADvC,EAC8CD,GAD9C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAIP,gBAAsBI,GAAtB;AAAA;AAAA;;;iEAAO,kBAAmBJ,GAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwBE,YAAAA,UAAxB,8DAAqCR,iBAArC;AAAA;AAAA,mBACSC,YADT;;AAAA;AAAA,6DACuBS,GADvB,CAC2BF,UAD3B,EACuCF,GADvC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import { openDB } from 'idb';\n\nconst defaultCollection = 'default';\nconst dbConnection = openDB('multitrack-player', 1, {\n  upgrade(db) {\n    db.createObjectStore(defaultCollection);\n  }\n});\n\nexport async function set(key, value, collection = defaultCollection) {\n  return (await dbConnection).put(collection, value, key);\n}\n\nexport async function get(key, collection = defaultCollection) {\n  return (await dbConnection).get(collection, key);\n}\n"]}]}