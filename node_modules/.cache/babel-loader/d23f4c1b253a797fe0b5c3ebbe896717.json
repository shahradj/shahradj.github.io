{"remainingRequest":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js!/home/shahrad/Documents/multiplayer/src/store/index.js","dependencies":[{"path":"/home/shahrad/Documents/multiplayer/src/store/index.js","mtime":1684244427390},{"path":"/home/shahrad/Documents/multiplayer/node_modules/cache-loader/dist/cjs.js","mtime":1684244501439},{"path":"/home/shahrad/Documents/multiplayer/node_modules/babel-loader/lib/index.js","mtime":1684244499435}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCB7IGNsaWNrRXZlbnRMb29wLCBzZXRDbGlja0V2ZW50TG9vcENvdW50LCBnZXRDbGlja0JlYXRzLCBnZXRDbGlja0ludGVydmFsIH0gZnJvbSAnLi4vY2xpY2snOwppbXBvcnQgc2V0dGluZ3MgZnJvbSAnLi9zZXR0aW5ncyc7CmltcG9ydCB7IHRyYWNrc0F1ZGlvQ29udGV4dCwgbmV3VHJhY2ssIHNldFRyYWNrR2FpbiwgcGxheVRyYWNrcyB9IGZyb20gJy4uL3RyYWNrcyc7ClZ1ZS51c2UoVnVleCk7CnZhciBldmVudExvb3BTdGFydCA9IHRyYWNrc0F1ZGlvQ29udGV4dC5jdXJyZW50VGltZTsKdmFyIHRyYWNrRXZlbnRMb29wQ291bnQgPSAwOwp2YXIgc3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgbW9kdWxlczogewogICAgc2V0dGluZ3M6IHNldHRpbmdzCiAgfSwKICBzdGF0ZTogewogICAgcGxheVN0YXRlOiAnc3RvcHBlZCcsCiAgICBwbGF5UG9zaXRpb246IDAsCiAgICB0cmFja3M6IFtdLAogICAgY2xpY2tBY3RpdmU6IGZhbHNlLAogICAgY2xpY2tCcG06IDEwMiwKICAgIHNvbG9UcmFjazogbnVsbCwKICAgIGRpYWxvZzogbnVsbCwKICAgIGxvYWRpbmc6IHRydWUsCiAgICBjbGlja1RpbWVTaWduYXR1cmU6IHsKICAgICAgYmVhdHM6IDQsCiAgICAgIHVuaXQ6IDQKICAgIH0sCiAgICBjb250cm9sRWRpdE1vZGU6IG51bGwsCiAgICBjb250cm9sRWRpdFNlbGVjdGVkOiBudWxsCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBnZXRUcmFjazogZnVuY3Rpb24gZ2V0VHJhY2soc3RhdGUpIHsKICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgIHJldHVybiBzdGF0ZS50cmFja3MuZmluZChmdW5jdGlvbiAoXykgewogICAgICAgICAgcmV0dXJuIF8gPT09IHRyYWNrOwogICAgICAgIH0pOwogICAgICB9OwogICAgfSwKICAgIHBsYXlCZWF0c1Bvc2l0aW9uOiBmdW5jdGlvbiBwbGF5QmVhdHNQb3NpdGlvbihzdGF0ZSkgewogICAgICByZXR1cm4gZ2V0Q2xpY2tCZWF0cyhzdGF0ZSk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFBsYXlTdGF0ZTogZnVuY3Rpb24gc2V0UGxheVN0YXRlKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5wbGF5U3RhdGUgPSB2YWx1ZTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAcGFyYW0ge1RyYWNrfSB0cmFjawogICAgICovCiAgICBhZGRUcmFjazogZnVuY3Rpb24gYWRkVHJhY2soc3RhdGUsIHRyYWNrKSB7CiAgICAgIHN0YXRlLnRyYWNrcy5wdXNoKHRyYWNrKTsKICAgIH0sCiAgICByZW1vdmVUcmFjazogZnVuY3Rpb24gcmVtb3ZlVHJhY2soc3RhdGUsIHRyYWNrKSB7CiAgICAgIHN0YXRlLnRyYWNrcy5zcGxpY2Uoc3RhdGUudHJhY2tzLmluZGV4T2YodHJhY2spLCAxKTsKICAgIH0sCiAgICBzZXRDbGlja0FjdGl2ZTogZnVuY3Rpb24gc2V0Q2xpY2tBY3RpdmUoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmNsaWNrQWN0aXZlID0gdmFsdWU7CiAgICB9LAogICAgc2V0UGxheVBvc2l0aW9uOiBmdW5jdGlvbiBzZXRQbGF5UG9zaXRpb24oc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLnBsYXlQb3NpdGlvbiA9IHZhbHVlOwogICAgfSwKICAgIHNldFRyYWNrQWN0aXZlOiBmdW5jdGlvbiBzZXRUcmFja0FjdGl2ZShzdGF0ZSwgX3JlZikgewogICAgICB2YXIgdHJhY2sgPSBfcmVmLnRyYWNrLAogICAgICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlOwogICAgICB0cmFjay5hY3RpdmUgPSB2YWx1ZTsKICAgIH0sCiAgICBzZXRTb2xvVHJhY2s6IGZ1bmN0aW9uIHNldFNvbG9UcmFjayhzdGF0ZSwgdHJhY2spIHsKICAgICAgc3RhdGUuc29sb1RyYWNrID0gdHJhY2s7CiAgICB9LAogICAgc2V0RGlhbG9nOiBmdW5jdGlvbiBzZXREaWFsb2coc3RhdGUsIGRpYWxvZykgewogICAgICBzdGF0ZS5kaWFsb2cgPSBkaWFsb2c7CiAgICB9LAogICAgc2V0Q2xpY2tCcG06IGZ1bmN0aW9uIHNldENsaWNrQnBtKHN0YXRlLCB2YWx1ZSkgewogICAgICBzdGF0ZS5jbGlja0JwbSA9IHZhbHVlOwogICAgfSwKICAgIHNldExvYWRpbmc6IGZ1bmN0aW9uIHNldExvYWRpbmcoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmxvYWRpbmcgPSB2YWx1ZTsKICAgIH0sCiAgICBzZXRDbGlja1RpbWVTaWduYXR1cmU6IGZ1bmN0aW9uIHNldENsaWNrVGltZVNpZ25hdHVyZShzdGF0ZSwgdmFsdWUpIHsKICAgICAgc3RhdGUuY2xpY2tUaW1lU2lnbmF0dXJlID0gdmFsdWU7CiAgICB9LAogICAgc2V0Q29udHJvbEVkaXRNb2RlOiBmdW5jdGlvbiBzZXRDb250cm9sRWRpdE1vZGUoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmNvbnRyb2xFZGl0TW9kZSA9IHZhbHVlOwogICAgfSwKICAgIHNldENvbnRyb2xFZGl0U2VsZWN0ZWQ6IGZ1bmN0aW9uIHNldENvbnRyb2xFZGl0U2VsZWN0ZWQoc3RhdGUsIHZhbHVlKSB7CiAgICAgIHN0YXRlLmNvbnRyb2xFZGl0U2VsZWN0ZWQgPSB2YWx1ZTsKICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHBsYXlQYXVzZTogZnVuY3Rpb24gcGxheVBhdXNlKF9yZWYyKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYyLnN0YXRlLAogICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICB2YXIgc3RhdGVzID0gewogICAgICAgIHN0b3BwZWQ6ICdwbGF5aW5nJywKICAgICAgICBwYXVzZWQ6ICdwbGF5aW5nJywKICAgICAgICBwbGF5aW5nOiAncGF1c2VkJwogICAgICB9OwogICAgICB2YXIgbmV3U3RhdGUgPSBzdGF0ZXNbc3RhdGUucGxheVN0YXRlXTsKICAgICAgY29tbWl0KCdzZXRQbGF5U3RhdGUnLCBuZXdTdGF0ZSk7CgogICAgICBpZiAodHJhY2tzQXVkaW9Db250ZXh0LnN0YXRlID09PSAnc3VzcGVuZGVkJykgewogICAgICAgIHRyYWNrc0F1ZGlvQ29udGV4dC5yZXN1bWUoKTsKICAgICAgfQoKICAgICAgaWYgKG5ld1N0YXRlID09PSAncGxheWluZycpIHsKICAgICAgICBldmVudExvb3BTdGFydCA9IHRyYWNrc0F1ZGlvQ29udGV4dC5jdXJyZW50VGltZTsKICAgICAgICB0cmFja0V2ZW50TG9vcENvdW50ID0gMDsKICAgICAgICBwbGF5VHJhY2tzKHN0YXRlLnRyYWNrcywgc3RhdGUucGxheVBvc2l0aW9uKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS50cmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICAgIHJldHVybiB0cmFjay5wYXVzZSgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgcGxheUF0OiBmdW5jdGlvbiBwbGF5QXQoX3JlZjMsIHBsYXlQb3NpdGlvbikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICAgIGRpc3BhdGNoKCdzZXRQbGF5UG9zaXRpb24nLCBwbGF5UG9zaXRpb24pOwogICAgICBzZXRDbGlja0V2ZW50TG9vcENvdW50KE1hdGguZmxvb3IocGxheVBvc2l0aW9uIC8gZ2V0Q2xpY2tJbnRlcnZhbChzdGF0ZSkpKTsKICAgICAgcGxheVRyYWNrcyhzdGF0ZS50cmFja3MsIHN0YXRlLnBsYXlQb3NpdGlvbik7CiAgICB9LAogICAgc3RvcDogZnVuY3Rpb24gc3RvcChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKCiAgICAgIGlmIChzdGF0ZS5wbGF5U3RhdGUgPT09ICdwbGF5aW5nJykgewogICAgICAgIHN0YXRlLnRyYWNrcy5mb3JFYWNoKGZ1bmN0aW9uICh0cmFjaykgewogICAgICAgICAgcmV0dXJuIHRyYWNrLnN0b3AoKTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgY29tbWl0KCdzZXRQbGF5U3RhdGUnLCAnc3RvcHBlZCcpOwogICAgICBjb21taXQoJ3NldFBsYXlQb3NpdGlvbicsIDApOwogICAgICBzZXRDbGlja0V2ZW50TG9vcENvdW50KDApOwogICAgICBzdGF0ZS50cmFja3MuZm9yRWFjaChmdW5jdGlvbiAodHJhY2spIHsKICAgICAgICByZXR1cm4gdHJhY2suZXZlbnRMb29wKHN0b3JlLnN0YXRlLnBsYXlQb3NpdGlvbik7CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFRyYWNrOiBmdW5jdGlvbiBhZGRUcmFjayhfcmVmNSwgX3JlZjYpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgdmFyIG5hbWUgPSBfcmVmNi5uYW1lLAogICAgICAgICAgYXJyYXlCdWZmZXIgPSBfcmVmNi5hcnJheUJ1ZmZlcjsKICAgICAgY29tbWl0KCdhZGRUcmFjaycsIG5ld1RyYWNrKHsKICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgIGFycmF5QnVmZmVyOiBhcnJheUJ1ZmZlcgogICAgICB9KSk7CiAgICB9LAogICAgcmVtb3ZlVHJhY2s6IGZ1bmN0aW9uIHJlbW92ZVRyYWNrKF9yZWY3LCB0cmFjaykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogICAgICBjb21taXQoJ3JlbW92ZVRyYWNrJywgdHJhY2spOwogICAgfSwKICAgIHRvZ2dsZUNsaWNrQWN0aXZlOiBmdW5jdGlvbiB0b2dnbGVDbGlja0FjdGl2ZShfcmVmOCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmOC5zdGF0ZTsKICAgICAgY29tbWl0KCdzZXRDbGlja0FjdGl2ZScsICFzdGF0ZS5jbGlja0FjdGl2ZSk7CiAgICB9LAogICAgc2V0VHJhY2tHYWluVmFsdWU6IGZ1bmN0aW9uIHNldFRyYWNrR2FpblZhbHVlKF9yZWY5LCBfcmVmMTApIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjkuc3RhdGU7CiAgICAgIHZhciB0cmFjayA9IF9yZWYxMC50cmFjaywKICAgICAgICAgIHZhbHVlID0gX3JlZjEwLnZhbHVlOwogICAgICB0cmFjay5nYWluVmFsdWUgPSB2YWx1ZTsKICAgICAgc2V0VHJhY2tHYWluKHRyYWNrLCBzdGF0ZS5zZXR0aW5ncywgc3RhdGUpOwogICAgfSwKICAgIHNldFRyYWNrQWN0aXZlOiBmdW5jdGlvbiBzZXRUcmFja0FjdGl2ZShfcmVmMTEsIF9yZWYxMikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjExLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjExLnN0YXRlOwogICAgICB2YXIgdHJhY2sgPSBfcmVmMTIudHJhY2ssCiAgICAgICAgICB2YWx1ZSA9IF9yZWYxMi52YWx1ZTsKICAgICAgY29tbWl0KCdzZXRUcmFja0FjdGl2ZScsIHsKICAgICAgICB0cmFjazogdHJhY2ssCiAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgIH0pOwogICAgICBzZXRUcmFja0dhaW4odHJhY2ssIHN0YXRlLnNldHRpbmdzLCBzdGF0ZSk7CiAgICB9LAogICAgc2V0U29sb1RyYWNrOiBmdW5jdGlvbiBzZXRTb2xvVHJhY2soX3JlZjEzLCB0cmFjaykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjEzLnN0YXRlOwogICAgICBjb21taXQoJ3NldFNvbG9UcmFjaycsIHRyYWNrKTsKICAgICAgc3RhdGUudHJhY2tzLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICAgICAgcmV0dXJuIHNldFRyYWNrR2Fpbih0cmFjaywgc3RhdGUuc2V0dGluZ3MsIHN0YXRlKTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlU2V0dGluZ3NEaWFsb2c6IGZ1bmN0aW9uIHRvZ2dsZVNldHRpbmdzRGlhbG9nKF9yZWYxNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE0LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjE0LnN0YXRlOwogICAgICBjb21taXQoJ3NldERpYWxvZycsIHN0YXRlLmRpYWxvZyA9PT0gJ3NldHRpbmdzJyA/IG51bGwgOiAnc2V0dGluZ3MnKTsKICAgIH0sCiAgICB0b2dnbGVBYm91dERpYWxvZzogZnVuY3Rpb24gdG9nZ2xlQWJvdXREaWFsb2coX3JlZjE1KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTUuY29tbWl0LAogICAgICAgICAgc3RhdGUgPSBfcmVmMTUuc3RhdGU7CiAgICAgIGNvbW1pdCgnc2V0RGlhbG9nJywgc3RhdGUuZGlhbG9nID09PSAnYWJvdXQnID8gbnVsbCA6ICdhYm91dCcpOwogICAgfSwKICAgIHNldENsaWNrQnBtOiBmdW5jdGlvbiBzZXRDbGlja0JwbShfcmVmMTYsIHZhbHVlKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMTYuY29tbWl0OwogICAgICBjb21taXQoJ3NldENsaWNrQnBtJywgdmFsdWUpOwogICAgfSwKICAgIHNldENsaWNrVGltZVNpZ25hdHVyZTogZnVuY3Rpb24gc2V0Q2xpY2tUaW1lU2lnbmF0dXJlKF9yZWYxNywgdmFsdWUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxNy5jb21taXQ7CiAgICAgIGNvbW1pdCgnc2V0Q2xpY2tUaW1lU2lnbmF0dXJlJywgdmFsdWUpOwogICAgfSwKICAgIHRvZ2dsZUNvbnRyb2xFZGl0TW9kZTogZnVuY3Rpb24gdG9nZ2xlQ29udHJvbEVkaXRNb2RlKF9yZWYxOCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE4LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjE4LnN0YXRlOwogICAgICBjb21taXQoJ3NldENvbnRyb2xFZGl0TW9kZScsICFzdGF0ZS5jb250cm9sRWRpdE1vZGUpOwogICAgICBjb21taXQoJ3NldERpYWxvZycsIG51bGwpOwogICAgfSwKICAgIHNldENvbnRyb2xFZGl0U2VsZWN0ZWQ6IGZ1bmN0aW9uIHNldENvbnRyb2xFZGl0U2VsZWN0ZWQoX3JlZjE5LCB2YWx1ZSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjE5LmNvbW1pdDsKICAgICAgY29tbWl0KCdzZXRDb250cm9sRWRpdFNlbGVjdGVkJywgdmFsdWUpOwogICAgfSwKICAgIHNldFBsYXlQb3NpdGlvbjogZnVuY3Rpb24gc2V0UGxheVBvc2l0aW9uKF9yZWYyMCwgdmFsdWUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyMC5jb21taXQ7CiAgICAgIGNvbW1pdCgnc2V0UGxheVBvc2l0aW9uJywgdmFsdWUpOwogICAgfQogIH0KfSk7CnZhciB0cmFja0V2ZW50TG9vcEludGVydmFsID0gMC4wMTsKc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogIGlmIChzdG9yZS5zdGF0ZS5wbGF5U3RhdGUgPT09ICdwbGF5aW5nJykgewogICAgdmFyIHRyYWNrRGVsdGEgPSB0cmFja3NBdWRpb0NvbnRleHQuY3VycmVudFRpbWUgLSBldmVudExvb3BTdGFydDsKCiAgICBpZiAodHJhY2tEZWx0YSAvIHRyYWNrRXZlbnRMb29wQ291bnQgPiB0cmFja0V2ZW50TG9vcEludGVydmFsKSB7CiAgICAgIHRyYWNrRXZlbnRMb29wKCk7CiAgICAgIHRyYWNrRXZlbnRMb29wQ291bnQrKzsKICAgIH0KCiAgICBjbGlja0V2ZW50TG9vcChzdG9yZSk7CiAgfQp9LCAxKTsKCmZ1bmN0aW9uIHRyYWNrRXZlbnRMb29wKCkgewogIHN0b3JlLmNvbW1pdCgnc2V0UGxheVBvc2l0aW9uJywgc3RvcmUuc3RhdGUucGxheVBvc2l0aW9uICsgdHJhY2tFdmVudExvb3BJbnRlcnZhbCk7CiAgc3RvcmUuc3RhdGUudHJhY2tzLmZvckVhY2goZnVuY3Rpb24gKHRyYWNrKSB7CiAgICByZXR1cm4gdHJhY2suZXZlbnRMb29wKHN0b3JlLnN0YXRlLnBsYXlQb3NpdGlvbik7CiAgfSk7Cn0KCmV4cG9ydCBkZWZhdWx0IHN0b3JlOw=="},{"version":3,"sources":["/home/shahrad/Documents/multiplayer/src/store/index.js"],"names":["Vue","Vuex","clickEventLoop","setClickEventLoopCount","getClickBeats","getClickInterval","settings","tracksAudioContext","newTrack","setTrackGain","playTracks","use","eventLoopStart","currentTime","trackEventLoopCount","store","Store","modules","state","playState","playPosition","tracks","clickActive","clickBpm","soloTrack","dialog","loading","clickTimeSignature","beats","unit","controlEditMode","controlEditSelected","getters","getTrack","track","find","_","playBeatsPosition","mutations","setPlayState","value","addTrack","push","removeTrack","splice","indexOf","setClickActive","setPlayPosition","setTrackActive","active","setSoloTrack","setDialog","setClickBpm","setLoading","setClickTimeSignature","setControlEditMode","setControlEditSelected","actions","playPause","commit","states","stopped","paused","playing","newState","resume","forEach","pause","playAt","dispatch","Math","floor","stop","eventLoop","name","arrayBuffer","toggleClickActive","setTrackGainValue","gainValue","toggleSettingsDialog","toggleAboutDialog","toggleControlEditMode","trackEventLoopInterval","setInterval","trackDelta","trackEventLoop"],"mappings":"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","sourcesContent":["import Vue from 'vue';\nimport Vuex from 'vuex';\nimport {\n  clickEventLoop,\n  setClickEventLoopCount,\n  getClickBeats,\n  getClickInterval\n} from '../click';\nimport settings from './settings';\n\nimport {\n  tracksAudioContext,\n  newTrack,\n  setTrackGain,\n  playTracks\n} from '../tracks';\n\nVue.use(Vuex);\n\nlet eventLoopStart = tracksAudioContext.currentTime;\nlet trackEventLoopCount = 0;\n\nconst store = new Vuex.Store({\n  modules: {\n    settings\n  },\n  state: {\n    playState: 'stopped',\n    playPosition: 0,\n    tracks: [],\n    clickActive: false,\n    clickBpm: 102,\n    soloTrack: null,\n    dialog: null,\n    loading: true,\n    clickTimeSignature: {\n      beats: 4,\n      unit: 4\n    },\n    controlEditMode: null,\n    controlEditSelected: null\n  },\n  getters: {\n    getTrack(state) {\n      return track => state.tracks.find(_ => _ === track);\n    },\n    playBeatsPosition(state) {\n      return getClickBeats(state);\n    }\n  },\n  mutations: {\n    setPlayState(state, value) {\n      state.playState = value;\n    },\n    /**\n     * @param {Track} track\n     */\n    addTrack(state, track) {\n      state.tracks.push(track);\n    },\n    removeTrack(state, track) {\n      state.tracks.splice(state.tracks.indexOf(track), 1);\n    },\n    setClickActive(state, value) {\n      state.clickActive = value;\n    },\n    setPlayPosition(state, value) {\n      state.playPosition = value;\n    },\n\n    setTrackActive(state, { track, value }) {\n      track.active = value;\n    },\n    setSoloTrack(state, track) {\n      state.soloTrack = track;\n    },\n    setDialog(state, dialog) {\n      state.dialog = dialog;\n    },\n    setClickBpm(state, value) {\n      state.clickBpm = value;\n    },\n    setLoading(state, value) {\n      state.loading = value;\n    },\n    setClickTimeSignature(state, value) {\n      state.clickTimeSignature = value;\n    },\n    setControlEditMode(state, value) {\n      state.controlEditMode = value;\n    },\n    setControlEditSelected(state, value) {\n      state.controlEditSelected = value;\n    }\n  },\n  actions: {\n    playPause({ state, commit }) {\n      const states = {\n        stopped: 'playing',\n        paused: 'playing',\n        playing: 'paused'\n      };\n      const newState = states[state.playState];\n      commit('setPlayState', newState);\n      if (tracksAudioContext.state === 'suspended') {\n        tracksAudioContext.resume();\n      }\n      if (newState === 'playing') {\n        eventLoopStart = tracksAudioContext.currentTime;\n        trackEventLoopCount = 0;\n        playTracks(state.tracks, state.playPosition);\n      } else {\n        state.tracks.forEach(track => track.pause());\n      }\n    },\n    playAt({ state, dispatch }, playPosition) {\n      dispatch('setPlayPosition', playPosition);\n      setClickEventLoopCount(\n        Math.floor(playPosition / getClickInterval(state))\n      );\n      playTracks(state.tracks, state.playPosition);\n    },\n    stop({ commit, state }) {\n      if (state.playState === 'playing') {\n        state.tracks.forEach(track => track.stop());\n      }\n      commit('setPlayState', 'stopped');\n      commit('setPlayPosition', 0);\n      setClickEventLoopCount(0);\n      state.tracks.forEach(track => track.eventLoop(store.state.playPosition));\n    },\n    addTrack({ commit }, { name, arrayBuffer }) {\n      commit('addTrack', newTrack({ name, arrayBuffer }));\n    },\n    removeTrack({ commit }, track) {\n      commit('removeTrack', track);\n    },\n    toggleClickActive({ commit, state }) {\n      commit('setClickActive', !state.clickActive);\n    },\n    setTrackGainValue({ state }, { track, value }) {\n      track.gainValue = value;\n      setTrackGain(track, state.settings, state);\n    },\n    setTrackActive({ commit, state }, { track, value }) {\n      commit('setTrackActive', { track, value });\n      setTrackGain(track, state.settings, state);\n    },\n    setSoloTrack({ commit, state }, track) {\n      commit('setSoloTrack', track);\n      state.tracks.forEach(track => setTrackGain(track, state.settings, state));\n    },\n    toggleSettingsDialog({ commit, state }) {\n      commit('setDialog', state.dialog === 'settings' ? null : 'settings');\n    },\n    toggleAboutDialog({ commit, state }) {\n      commit('setDialog', state.dialog === 'about' ? null : 'about');\n    },\n    setClickBpm({ commit }, value) {\n      commit('setClickBpm', value);\n    },\n    setClickTimeSignature({ commit }, value) {\n      commit('setClickTimeSignature', value);\n    },\n\n    toggleControlEditMode({ commit, state }) {\n      commit('setControlEditMode', !state.controlEditMode);\n      commit('setDialog', null);\n    },\n    setControlEditSelected({ commit }, value) {\n      commit('setControlEditSelected', value);\n    },\n    setPlayPosition({ commit }, value) {\n      commit('setPlayPosition', value);\n    }\n  }\n});\n\nconst trackEventLoopInterval = 0.01;\n\nsetInterval(() => {\n  if (store.state.playState === 'playing') {\n    const trackDelta = tracksAudioContext.currentTime - eventLoopStart;\n    if (trackDelta / trackEventLoopCount > trackEventLoopInterval) {\n      trackEventLoop();\n      trackEventLoopCount++;\n    }\n\n    clickEventLoop(store);\n  }\n}, 1);\n\nfunction trackEventLoop() {\n  store.commit(\n    'setPlayPosition',\n    store.state.playPosition + trackEventLoopInterval\n  );\n  store.state.tracks.forEach(track =>\n    track.eventLoop(store.state.playPosition)\n  );\n}\n\nexport default store;\n"]}]}